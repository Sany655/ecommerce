import{r as l,a as e,c as y,q as C,j as a,b as _,y as k}from"./app-a1ac7c39.js";import{A as N}from"./ApplicationLogo-5b869f1b.js";import{N as E}from"./NavLink-1614efb6.js";function S(){const[t,o]=l.useState(!1),s=()=>{window.pageYOffset>300?o(!0):o(!1)},h=()=>{window.scrollTo({top:0,behavior:"smooth"})};return l.useEffect(()=>(window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}),[]),t&&e("button",{onClick:h,className:"bg-blue-500 rounded-full text-white w-10 h-10 fixed bottom-10 right-0 xl:right-40",children:e("i",{className:"fa fa-arrow-up"})})}const w=l.createContext(),j=({children:t})=>{const[o,s]=l.useState({cart_items:[],total_amount:0,cart_token:"",coupon_id:null}),[h,c]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const n=(await y.get(route("cart.show"))).data.cart||{cart_items:[],total_amount:0,cart_token:"",coupon_id:null};s(n)}catch(m){console.error("Error fetching cart:",m.response.data)}finally{c(!1)}})()},[]);const g=async(i,m,n)=>{c(!0);try{const d={...(await y.post(route("cart.add"),{product_id:i,quantity:m,variants:n})).data.cart};if(d.coupon_id&&d.total_amount<d.coupon.minimum_purchase){r();return}s(d)}catch(u){console.log("Error adding to cart:",u.response.data)}finally{c(!1)}},f=async(i,m=null)=>{if(c(!0),o.cart_items.length===1){r();return}try{await y.delete(route("cart.remove",{itemId:i}));const n=o.cart_items.filter(d=>d.id!==i),u={...o,cart_items:n,total_amount:n.reduce((d,b)=>d+parseInt(b.subtotal),0)};if(u.coupon_id&&u.total_amount<u.coupon.minimum_purchase){r();return}s(u)}catch(n){console.error("Error removing from cart:",n.response.data)}finally{c(!1)}},r=async()=>{c(!0);try{await y.delete(route("cart.delete")),s({cart_items:[],total_amount:0,cart_token:"",coupon_id:null})}catch(i){console.error("Error clearing cart:",i.response.data.message)}finally{c(!1)}},x=(i,m,n)=>{s({...o,coupon_id:i,total_amount:o.total_amount-m,coupon:n})};return e(w.Provider,{value:{cart:o,addToCart:g,removeFromCart:f,clearCart:r,cartLoading:h,apply_coupon:x},children:t})},L=()=>l.useContext(w);function D({children:t}){const{url:o}=C();return l.useEffect(()=>{fbq("track","PageView")},[o]),e(j,{children:a("div",{className:"min-h-screen bg-gray-50",children:[e(T,{}),a("main",{className:"container relative px-4 py-6 mx-auto",children:[t,e(S,{})]}),e(A,{})]})})}const T=()=>{var f;const{cart:t}=L(),[o,s]=l.useState(""),h=r=>{r.preventDefault(),k.visit(route("home.search",o))},[c,g]=l.useState([]);return l.useEffect(()=>{y.get(route("categories.get_all")).then(r=>g(r.data)).catch(r=>console.log(r.message))},[]),a("header",{className:"sticky top-0 z-50 capitalize bg-white shadow-md",children:[a("div",{className:"container flex flex-col items-center justify-between gap-5 pt-8 pb-8 mx-auto text-blue-500 md:flex-row",children:[e("div",{className:"flex items-center",children:e(_,{href:"/",children:e(N,{})})}),a("div",{className:"flex items-center justify-between gap-4",children:[a("form",{className:"relative flex-shrink",onSubmit:h,children:[e("input",{type:"text",placeholder:"Search products...",className:"w-full px-4 py-2 text-black border border-blue-300 rounded-md focus:outline-none focus:ring focus:ring-blue-300",value:o,onChange:r=>s(r.target.value)}),e("i",{className:"absolute transform -translate-y-1/2 cursor-pointer fa fa-search right-4 top-1/2",onClick:h})]}),e("div",{className:"relative hover:text-gray-500",children:a(_,{href:route("cart.index"),className:"relative text-2xl",children:[e("i",{className:"fa fa-heart"}),e("span",{className:"absolute text-xs font-bold bg-red-600 text-white rounded-full px-1 top-0 right-0 transform translate-x-3 -translate-y-1",children:(f=t.cart_items)==null?void 0:f.length})]})}),a("p",{className:"line-clamp-2 text-xs md:text-sm font-bold",children:["Total: ",t.total_amount," BDT"]})]})]}),c.length>0&&a("div",{className:"",children:[e("hr",{}),e("div",{className:"container mx-auto flex flex-wrap items-center gap-2 md:gap-4 py-2 capitalize",children:c.map((r,x)=>e(E,{className:"text-sm font-bold text-gray-400",href:route("home.category_products",r.id),active:route().current("home.category_products",r.id),children:r.name},x))})]})]})},A=()=>{var s,h,c,g,f,r,x,i,m,n,u,d,b;const[t,o]=l.useState({});return l.useEffect(()=>{y.get(route("home.contact_info")).then(p=>{o(p.data),console.log(p.data)}).catch(p=>console.log(p.message))},[]),a("footer",{className:"py-8 bg-gray-100",children:[a("div",{className:"container grid grid-cols-1 gap-8 mx-auto text-center md:grid-cols-3 md:text-left",children:[a("div",{className:"flex items-center md:items-start flex-col gap-2",children:[e(_,{className:"text-xl font-bold text-blue-500",href:"/",children:e(N,{})}),a("p",{className:"text-sm text-gray-700",children:[(s=t.company)==null?void 0:s.description," ",e("br",{}),"Our motto is “",(h=t.company)==null?void 0:h.motto,"”."]})]}),t.payment_methods&&t.payment_methods.length>0&&e("div",{className:"md:text-center",children:a("div",{className:"mb-4",children:[e("h5",{className:"mb-2 text-lg font-semibold text-gray-800",children:"We Accept"}),t.payment_methods.map((p,v)=>e("div",{className:"flex justify-center space-x-2",children:e("img",{src:`/images/${p}.jpg`,alt:"bkash",className:"h-8"})},v))]})}),t.contact&&a("div",{className:"text-sm text-gray-700 md:text-right",children:[e("h5",{className:"mb-2 text-lg font-semibold text-gray-800",children:"Contact Us"}),((c=t.contact)==null?void 0:c.phone)&&a("p",{children:["📞 (+88) ",(g=t.contact)==null?void 0:g.phone]}),((f=t.contact)==null?void 0:f.email)&&a("p",{children:["✉️ ",(r=t.contact)==null?void 0:r.email]}),((x=t.contact)==null?void 0:x.address)&&a("p",{children:["🏢 ",(i=t.contact)==null?void 0:i.address]})]})]}),a("div",{className:"container pt-4 mx-auto mt-8 text-center border-t",children:[e("div",{className:"flex justify-center mb-4 space-x-4",children:(m=t.social_media)==null?void 0:m.map((p,v)=>e("a",{href:p.link,className:"text-gray-600 hover:text-gray-800",target:"_blank",children:e("i",{className:`fab fa-${p.name}`})},v))}),a("p",{className:"text-sm text-gray-700",children:[(n=t.company)==null?void 0:n.name," | ",(u=t.legal)==null?void 0:u.domain," ",(d=t.legal)==null?void 0:d.copyright," | ",((b=t.legal)==null?void 0:b.all_rights_reserved)&&"All Rights Reserved"]})]})]})};export{D as A,L as u};
