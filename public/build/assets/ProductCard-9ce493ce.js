import{r as l,j as s,a as n,F as b,y as c,b as w}from"./app-a1ac7c39.js";import{u as d}from"./AppLayout-9ada778d.js";import{P as f}from"./PrimaryButton-5fcae703.js";function C({product:e}){const{cart:m,addToCart:g,removeFromCart:o}=d(),[x,r]=l.useState(!1),[y,v]=l.useState([]),[i,N]=l.useState({});return l.useEffect(()=>{v(e!=null&&e.variants?JSON.parse(e.variants):[])},[e]),l.useEffect(()=>{var a;N(((a=m.cart_items)==null?void 0:a.find(t=>{var h;return((h=t.product)==null?void 0:h.id)===e.id}))||{})},[m,e.id]),s("div",{className:"flex flex-col justify-between transition-transform transform rounded-lg shadow-lg hover:scale-105 hover:shadow-xl",children:[n("img",{src:e.images&&JSON.parse(e.images).length>0?`/storage/${JSON.parse(e.images)[0]}`:"/images/default-product.png",alt:e==null?void 0:e.name,className:"w-full rounded-t-lg"}),s("div",{className:"flex flex-col justify-between p-4 bg-gray-100 rounded-b-lg",children:[n("h1",{className:"mb-2 text-sm font-bold tracking-wide text-center line-clamp-5",children:e==null?void 0:e.name}),n("p",{className:"text-gray-600 text-center flex flex-col mb-2",children:e.discount_price?s(b,{children:[s("span",{className:"px-1",children:["Regular Price: ",s("span",{className:"line-through",children:[e.price," BDT"]})]}),s("span",{children:["Discount Price: ",e.discount_price," BDT"]})]}):s("span",{className:"px-1",children:["Regular Price: ",e.price," BDT"]})}),y.some(a=>{var t;return((t=a.values)==null?void 0:t.split(",").length)>1})?null:x?n("i",{className:"self-center mb-3 text-2xl fa fa-spinner animate-spin"}):n("i",{className:`fa-heart text-blue-500 hover:text-gray-500 text-2xl self-center mb-3 transition-colors cursor-pointer ${Object.keys(i).length>0?"fa-solid":"fa-regular"}`,onClick:()=>{var a;r(!0),Object.keys(i).length>0?o(i.id).then(()=>r(!1)):(fbq("track","AddToCart",{content_name:e==null?void 0:e.name,content_category:(a=e==null?void 0:e.category)==null?void 0:a.name,value:e.discount_price||e.price,currency:"BDT"}),g(e.id,1,e.variants).then(()=>r(!1)))}}),s("div",{className:"flex justify-center gap-3",children:[e.variants&&Array.isArray(JSON.parse(e.variants))&&JSON.parse(e.variants).some(a=>a.values.split(",").length>1)?null:n(f,{className:"px-4 py-2 text-white transition-colors bg-yellow-600 rounded-lg hover:bg-yellow-700",onClick:()=>i!=null&&i.id?c.visit(route("home.checkout")):g(e.id,1,e.variants).then(()=>c.visit(route("home.checkout"))).catch(a=>alert("Something went wrong, try again!")),children:"Order Now"}),n(w,{href:route("home.product",e==null?void 0:e.id),children:n(f,{className:"px-4 py-2 text-white transition-colors bg-gray-700 rounded-lg hover:bg-gray-600",children:"View Details"})})]})]})]})}export{C as P};
