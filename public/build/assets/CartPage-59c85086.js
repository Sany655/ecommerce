import{j as t,a,Y as y,b as f}from"./app-a1ac7c39.js";import{A as C,u as _}from"./AppLayout-9ada778d.js";import"./ApplicationLogo-5b869f1b.js";import"./NavLink-1614efb6.js";const T=()=>{var s,o,d,i,u;const{cart:r,removeFromCart:x,addToCart:N,clearCart:v,cartLoading:g}=_();return t("div",{className:"container flex flex-col gap-2 mx-auto lg:flex-row",children:[t("div",{className:"flex-1 p-4 md:p-8 bg-white rounded-lg shadow-lg",children:[a("h1",{className:"mb-6 text-2xl font-bold text-center md:text-left",children:"Cart"}),((s=r.cart_items)==null?void 0:s.length)>0?a("div",{className:"space-y-4",children:(o=r.cart_items)==null?void 0:o.map((e,l)=>{var c,m,p,h,b;return t("div",{className:"flex flex-col md:flex-row items-center gap-4 p-4 border rounded-lg",children:[a("div",{className:"w-full md:w-24 flex-shrink-0",children:a("img",{src:(c=e.product)!=null&&c.images?`/storage/${JSON.parse(e.product.images)[0]}`:"",alt:(m=e.product)==null?void 0:m.name,className:"w-full md:w-24 h-24 object-contain md:object-cover rounded-lg"})}),t("div",{className:"flex-1",children:[a(f,{className:"text-blue-500 hover:underline",href:route("home.product",e.product_id),children:((p=e.product)==null?void 0:p.name)||"No name available"}),t("div",{className:"mt-2 text-red-500 font-bold",children:["Price: ",Math.round(((h=e.product)==null?void 0:h.discount_price)||((b=e.product)==null?void 0:b.price))||0," BDT"]}),a("div",{className:"text-sm text-gray-600",children:e.variants?Array.isArray(JSON.parse(e.variants))?JSON.parse(e.variants).map((n,w)=>t("span",{children:[n.attribute," : ",n.values,","," "]},w)):"Invalid variant data":"No variants available"})]}),t("div",{className:"flex items-center space-x-4",children:[a("div",{children:g?a("i",{className:"self-center mb-3 text-2xl fa fa-spinner animate-spin"}):a("input",{type:"number",value:e.quantity,min:"1",className:"w-16 text-center border rounded-lg",onChange:n=>n.target.value>0&&N(e.product.id,parseInt(n.target.value),e.variants)})}),t("div",{className:"text-red-500 font-bold",children:["Subtotal: ",Math.round(parseFloat(e.subtotal))," BDT"]}),a("button",{onClick:()=>x(e.id),className:"text-red-500 hover:text-red-700",children:"âœ•"})]})]},l)})}):a("p",{className:"py-8 text-center",children:"No product available in your cart!"})]}),t("div",{className:"p-8 bg-white rounded-lg shadow-lg",children:[a("h2",{className:"mb-6 text-2xl font-bold",children:"Cart totals"}),t("div",{className:"flex justify-between mb-4",children:[a("span",{className:"font-semibold",children:"Subtotal"}),t("span",{className:"font-bold text-red-500",children:[(d=r.cart_items)==null?void 0:d.reduce((e,l)=>e+parseInt(l.subtotal),0)," BDT"]})]}),t("div",{className:"flex justify-between mb-4",children:[a("span",{className:"font-semibold",children:"Shipping"}),a("span",{children:"Shipping costs are calculated during checkout."})]}),(r.coupon||r.cart_items.some(e=>e.coupon))&&t("div",{className:"flex justify-between my-4",children:[a("span",{className:"font-semibold",children:"Applied coupon"}),r.cart_items.some(e=>e.coupon)&&t("span",{className:"font-bold text-red-500",children:[r.cart_items.reduce((e,l)=>{var c;return e+parseInt(((c=l.coupon)==null?void 0:c.value)||0)},0)," BDT"]}),r.coupon&&t("span",{className:"font-bold text-red-500",children:[(i=r.coupon)==null?void 0:i.value," BDT"]})]}),t("div",{className:"flex justify-between mb-6",children:[a("span",{className:"font-semibold",children:"Total"}),t("span",{className:"font-bold text-red-500",children:[r.total_amount," BDT"]})]}),((u=r.cart_items)==null?void 0:u.length)>0&&t("div",{className:"flex flex-col gap-2",children:[a(f,{href:route("home.checkout"),onClick:()=>fbq("track","InitiateCheckout",{value:r.total_amount,currency:"BDT"}),className:"px-6 py-3 mt-4 text-center text-white bg-blue-500 rounded-lg hover:bg-blue-600",children:"Proceed to checkout"}),a("button",{className:"px-6 py-3 text-white bg-red-500 rounded-lg hover:bg-red-600",onClick:()=>{window.confirm("Are you sure you want to clear your cart?")&&window.confirm("This action cannot be undone.")&&v()},children:"Clear Cart"})]})]})]})};function S(){return t(C,{children:[a(y,{title:"Cart"}),a(T,{})]})}export{S as default};
